<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DeepSeek AI Êô∫ËÉΩÂØπËØùÂä©Êâã</title>
    
    <!-- CSSÊñá‰ª∂ÂºïÂÖ• -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/graph.css">
    <link rel="stylesheet" href="css/modal.css">
    
    <!-- D3.jsÂ∫ì -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    
    <!-- MarkdownÊ∏≤Êüì -->
    <script src="https://cdn.jsdelivr.net/npm/marked@9.1.6/marked.min.js"></script>
    
    <!-- LaTeXÊï∞Â≠¶ÂÖ¨ÂºèÊ∏≤Êüì -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <!-- ‰ª£Á†ÅÈ´ò‰∫Æ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Â∑¶‰æßËæπÊ†è -->
        <div class="sidebar">
            <!-- ‰æßËæπÊ†èÊ†áÈ¢ò -->
            <div class="sidebar-header">
                <h2>DeepSeek AI</h2>
                <p>ÂØπËØùÂä©Êâã</p>
            </div>
            
            <!-- ‰∏™‰∫∫ËµÑÊñôÂå∫Âüü -->
            <div class="profile-section">
                <div class="profile-header">
                    <div class="profile-avatar" onclick="openProfileModal()">
                        <span id="profileAvatarText">üë§</span>
                        <img id="profileAvatarImg" style="display: none;" />
                        <input type="file" id="profileAvatarUpload" style="display: none;" accept="image/*" onchange="handleAvatarUpload(event)">
                    </div>
                    <div class="profile-info">
                        <h3 id="profileName">Áî®Êà∑</h3>
                        <span class="profile-status" id="profileStatus" onclick="toggleStatus()">Âú®Á∫ø</span>
                    </div>
                </div>
            </div>

            <!-- ÂØπËØùÂàóË°®Âå∫Âüü -->
            <div class="conversations-section">
                <div class="conversations-header">
                    <h4>ÂØπËØùÂéÜÂè≤</h4>
                    <button class="new-chat-btn" onclick="startNewConversation()">Êñ∞ÂØπËØù</button>
                </div>
                <div class="conversation-list">
                    <div id="conversationsList">
                        <!-- ÂØπËØùÂàóË°®Â∞ÜÂä®ÊÄÅÁîüÊàê -->
                    </div>
                </div>
            </div>

            <!-- Êìç‰ΩúÊåâÈíÆÂå∫Âüü -->
            <div class="sidebar-actions">
                <button class="action-btn" onclick="clearCurrentChat()">Ê∏ÖÁ©∫ÂΩìÂâçÂØπËØù</button>
                <button class="action-btn" onclick="exportChat()">ÂØºÂá∫ÂØπËØù</button>
                <button class="action-btn danger" onclick="deleteConversation(currentConversationId)">Âà†Èô§ÂØπËØù</button>
            </div>

            <!-- ÁâàÊùÉ‰ø°ÊÅØ -->
            <div class="sidebar-footer">
                ¬© 2024 DeepSeek AI
            </div>
        </div>

        <!-- ‰∏ªÂÜÖÂÆπÂå∫Âüü -->
        <div class="main-content">
            <!-- ËÅäÂ§©Â§¥ÈÉ® -->
            <div class="chat-header">
                <h1 id="currentTitle">‰ªÄ‰πàÊòØvue</h1>
            </div>
            
            <!-- ËÅäÂ§©ÂÜÖÂÆπÂàÜÊ†è -->
            <div class="chat-area">
                <!-- Â∑¶‰æßÂØπËØùÂå∫ -->
                <div class="chat-messages-container">
                    <div class="chat-messages" id="chatMessages">
                        <!-- ÂØπËØùÊ∂àÊÅØÂ∞ÜÂä®ÊÄÅÁîüÊàê -->
                    </div>
                </div>
                
                <!-- Âè≥‰æßÂä®ÊÄÅÂõæÂå∫ -->
                <div class="graph-section">
                    <div id="graph-container">
                        <!-- D3.jsÂõæË°®Â∞ÜÂú®ËøôÈáåÊ∏≤Êüì -->
                    </div>
                </div>
            </div>
            
            <!-- ËæìÂÖ•Âå∫Âüü -->
            <div class="chat-input-container">
                <div class="chat-input-wrapper">
                    <textarea id="chatInput" class="chat-input" placeholder="ËæìÂÖ•ÊÇ®ÁöÑÊ∂àÊÅØ..." rows="1"></textarea>
                    <button id="sendBtn" class="send-btn" onclick="sendMessage()">ÂèëÈÄÅ</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Âä†ËΩΩÂä®Áîª -->
    <div class="loading" id="loading">
        <div class="loading-dots">
            <div></div>
            <div></div>
            <div></div>
        </div>
        <p>DeepSeek AIÊ≠£Âú®ÊÄùËÄÉ‰∏≠...</p>
    </div>

    <!-- ‰∏™‰∫∫‰∏ªÈ°µÊ®°ÊÄÅÊ°Ü -->
    <div class="profile-modal" id="profileModal">
        <div class="profile-modal-content">
            <div class="profile-modal-header">
                <div class="profile-modal-avatar" onclick="document.getElementById('modalAvatarUpload').click()">
                    <span id="modalAvatarText">üë§</span>
                    <img id="modalAvatarImg" style="display: none;" />
                    <input type="file" id="modalAvatarUpload" style="display: none;" accept="image/*" onchange="handleModalAvatarUpload(event)">
                </div>
                <h2>‰∏™‰∫∫ËµÑÊñô</h2>
            </div>
            
            <form class="profile-form" onsubmit="saveProfile(event)">
                <div class="form-group">
                    <label for="userName">Áî®Êà∑Âêç</label>
                    <input type="text" id="userName" placeholder="ËØ∑ËæìÂÖ•Áî®Êà∑Âêç" required>
                </div>
                
                <div class="form-group">
                    <label for="userEmail">ÈÇÆÁÆ±</label>
                    <input type="email" id="userEmail" placeholder="ËØ∑ËæìÂÖ•ÈÇÆÁÆ±">
                </div>
                
                <div class="form-group">
                    <label for="userBio">‰∏™‰∫∫ÁÆÄ‰ªã</label>
                    <textarea id="userBio" placeholder="‰ªãÁªç‰∏Ä‰∏ãËá™Â∑±..."></textarea>
                </div>
                
                <div class="form-group">
                    <label for="userLocation">ÊâÄÂú®Âú∞</label>
                    <input type="text" id="userLocation" placeholder="ËØ∑ËæìÂÖ•ÊâÄÂú®Âú∞">
                </div>
                
                <div class="profile-modal-actions">
                    <button type="button" class="modal-btn secondary" onclick="closeProfileModal()">ÂèñÊ∂à</button>
                    <button type="submit" class="modal-btn primary">‰øùÂ≠ò</button>
                </div>
            </form>
        </div>
    </div>

    <!-- MathJaxÈÖçÁΩÆ -->
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true,
                processEnvironments: true
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
                ignoreHtmlClass: 'tex2jax_ignore',
                processHtmlClass: 'tex2jax_process'
            }
        };
    </script>

    <!-- JavaScriptÊñá‰ª∂ÂºïÂÖ• -->
    <script src="js/app.js"></script>
    <script src="js/graph.js"></script>
</body>
</html> 